!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}function o(t){return t&&t.__esModule?t:{default:t}}var i=e(1),u=o(i),c=e(4),a=e(5),f=r(a),s=e(6),p=e(7),l=e(8);(0,a.load)(c.config.background_url,c.config.spritesheet_url).then(function(){document.querySelector("section").classList.add("visible"),(0,a.render)()}).then(function(){(0,s.ontick)(function(t){(0,a.render)(t,c.config.mapping,c.config.spritesheet)})}).then(function(){(0,p.oninput)(function(t){(0,s.play)(t)})});var d=!1;document.querySelector("button").onclick=function(){var t=(0,p.getinput)();return t.trim().length?d?alert("be patient!"):(document.querySelector("section").classList.add("processing"),d=!0,void(0,l.compile)((0,p.getinput)(),f,c.config).then(function(t){var n=u.default.defer(),e=new FormData;e.append("api_key","dc6zaTOxFJmzC"),e.append("username","openbeta"),e.append("file",t,"file.webm");var r=new XMLHttpRequest;return r.onload=function(t){return 200!==r.status?n.reject(r.response):void n.resolve(JSON.parse(r.response))},r.open("post","https://upload.giphy.com/v1/gifs"),r.send(e),n.promise}).then(function(t){t.data&&t.data.id&&window.open("https://media.giphy.com/media/"+t.data.id+"/giphy.gif")}).then(function(){document.querySelector("section").classList.remove("processing"),d=!1}).catch(function(t){console.log(t)})):alert("no message typed!")}},function(t,n,e){(function(n,e){!function(n){"use strict";if("function"==typeof bootstrap)bootstrap("promise",n);else{t.exports=n()}}(function(){"use strict";function t(t){return function(){return G.apply(t,arguments)}}function r(t){return t===Object(t)}function o(t){return"[object StopIteration]"===rt(t)||t instanceof $}function i(t,n){if(Q&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(ot)===-1){for(var e=[],r=n;r;r=r.source)r.stack&&e.unshift(r.stack);e.unshift(t.stack);var o=e.join("\n"+ot+"\n");t.stack=u(o)}}function u(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];f(o)||c(o)||!o||e.push(o)}return e.join("\n")}function c(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function a(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function f(t){var n=a(t);if(!n)return!1;var e=n[0],r=n[1];return e===H&&r>=J&&r<=ft}function s(){if(Q)try{throw new Error}catch(r){var t=r.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],e=a(n);if(!e)return;return H=e[0],e[1]}}function p(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}function l(t){return t instanceof y?t:x(t)?O(t):I(t)}function d(){function t(t){n=t,i.source=t,K(e,function(n,e){l.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=tt(d.prototype),i=tt(y.prototype);if(i.promiseDispatch=function(t,o,i){var u=X(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):l.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=w(n);return g(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},l.longStackSupport&&Q)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(e){n||t(l(e))},o.fulfill=function(e){n||t(I(e))},o.reject=function(e){n||t(R(e))},o.notify=function(t){n||K(r,function(n,e){l.nextTick(function(){e(t)})},void 0)},o}function h(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=d();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function v(t){return h(function(n,e){for(var r=0,o=t.length;r<o;r++)l(t[r]).then(n,e)})}function y(t,n,e){void 0===n&&(n=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=tt(y.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(t){u=R(t)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function m(t,n,e,r){return l(t).then(n,e,r)}function w(t){if(g(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function g(t){return t instanceof y}function x(t){return r(t)&&"function"==typeof t.then}function k(t){return g(t)&&"pending"===t.inspect().state}function j(t){return!g(t)||"fulfilled"===t.inspect().state}function b(t){return g(t)&&"rejected"===t.inspect().state}function T(){it.length=0,ut.length=0,at||(at=!0)}function _(t,e){at&&("object"==typeof n&&"function"==typeof n.emit&&l.nextTick.runAfter(function(){Y(ut,t)!==-1&&(n.emit("unhandledRejection",e,t),ct.push(t))}),ut.push(t),e&&"undefined"!=typeof e.stack?it.push(e.stack):it.push("(no stack) "+e))}function A(t){if(at){var e=Y(ut,t);e!==-1&&("object"==typeof n&&"function"==typeof n.emit&&l.nextTick.runAfter(function(){var r=Y(ct,t);r!==-1&&(n.emit("rejectionHandled",it[e],t),ct.splice(r,1))}),ut.splice(e,1),it.splice(e,1))}}function R(t){var n=y({when:function(n){return n&&A(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return _(n,t),n}function I(t){return y({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},delete:function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return et(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function O(t){var n=d();return l.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function S(t){return y({isDef:function(){}},function(n,e){return F(t,n,e)},function(){return l(t).inspect()})}function E(t,n,e){return l(t).spread(n,e)}function M(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=e[t](n)}catch(t){return R(t)}return u.done?l(u.value):m(u.value,r,i)}try{u=e[t](n)}catch(t){return o(t)?l(t.value):R(t)}return m(u,r,i)}var e=t.apply(this,arguments),r=n.bind(n,"next"),i=n.bind(n,"throw");return r()}}function N(t){l.done(l.async(t)())}function D(t){throw new $(t)}function P(t){return function(){return E([this,C(arguments)],function(n,e){return t.apply(n,e)})}}function F(t,n,e){return l(t).dispatch(n,e)}function C(t){return m(t,function(t){var n=0,e=d();return K(t,function(r,o,i){var u;g(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,m(o,function(r){t[i]=r,0===--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function q(t){if(0===t.length)return l.resolve();var n=l.defer(),e=0;return K(t,function(r,o,i){function u(t){n.resolve(t)}function c(){e--,0===e&&n.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function a(t){n.notify({index:i,value:t})}var f=t[i];e++,m(f,u,c,a)},void 0),n.promise}function L(t){return m(t,function(t){return t=Z(t,l),m(C(Z(t,function(t){return m(t,V,V)})),function(){return t})})}function U(t){return l(t).allSettled()}function z(t,n){return l(t).then(void 0,void 0,n)}function B(t,n){return l(t).nodeify(n)}var Q=!1;try{throw new Error}catch(t){Q=!!t.stack}var H,$,J=s(),V=function(){},W=function(){function t(){for(var t,n;o.next;)o=o.next,t=o.task,o.task=void 0,n=o.domain,n&&(o.domain=void 0,n.enter()),r(t,n);for(;f.length;)t=f.pop(),r(t);u=!1}function r(n,e){try{n()}catch(n){if(a)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}var o={task:void 0,next:null},i=o,u=!1,c=void 0,a=!1,f=[];if(W=function(t){i=i.next={task:t,domain:a&&n.domain,next:null},u||(u=!0,c())},"object"==typeof n&&"[object process]"===n.toString()&&n.nextTick)a=!0,c=function(){n.nextTick(t)};else if("function"==typeof e)c="undefined"!=typeof window?e.bind(window,t):function(){e(t)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){c=p,s.port1.onmessage=t,t()};var p=function(){s.port2.postMessage(0)};c=function(){setTimeout(t,0),p()}}else c=function(){setTimeout(t,0)};return W.runAfter=function(t){f.push(t),u||(u=!0,c())},W}(),G=Function.call,X=t(Array.prototype.slice),K=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;e<r;e++)e in this&&(n=t(n,this[e],e));return n}),Y=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),Z=t(Array.prototype.map||function(t,n){var e=this,r=[];return K(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),tt=Object.create||function(t){function n(){}return n.prototype=t,new n},nt=t(Object.prototype.hasOwnProperty),et=Object.keys||function(t){var n=[];for(var e in t)nt(t,e)&&n.push(e);return n},rt=t(Object.prototype.toString);$="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";l.resolve=l,l.nextTick=W,l.longStackSupport=!1,"object"==typeof n&&n&&n.env&&n.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(X(arguments,1)):t.resolve(e)}},l.Promise=h,l.promise=h,h.race=v,h.all=C,h.reject=R,h.resolve=l,l.passByCopy=function(t){return t},y.prototype.passByCopy=function(){return this},l.join=function(t,n){return l(t).join(n)},y.prototype.join=function(t){return l([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Can't join: not the same: "+t+" "+n)})},l.race=v,y.prototype.race=function(){return this.then(l.race)},l.makePromise=y,y.prototype.toString=function(){return"[object Promise]"},y.prototype.then=function(t,n,e){function r(n){try{return"function"==typeof t?t(n):n}catch(t){return R(t)}}function o(t){if("function"==typeof n){i(t,c);try{return n(t)}catch(t){return R(t)}}return R(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,a=d(),f=!1;return l.nextTick(function(){c.promiseDispatch(function(t){f||(f=!0,a.resolve(r(t)))},"when",[function(t){f||(f=!0,a.resolve(o(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(t){if(e=!0,!l.onerror)throw t;l.onerror(t)}e||a.notify(n)}]),a.promise},l.tap=function(t,n){return l(t).tap(n)},y.prototype.tap=function(t){return t=l(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},l.when=m,y.prototype.thenResolve=function(t){return this.then(function(){return t})},l.thenResolve=function(t,n){return l(t).thenResolve(n)},y.prototype.thenReject=function(t){return this.then(function(){throw t})},l.thenReject=function(t,n){return l(t).thenReject(n)},l.nearer=w,l.isPromise=g,l.isPromiseAlike=x,l.isPending=k,y.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=j,y.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=b,y.prototype.isRejected=function(){return"rejected"===this.inspect().state};var it=[],ut=[],ct=[],at=!0;l.resetUnhandledRejections=T,l.getUnhandledReasons=function(){return it.slice()},l.stopUnhandledRejectionTracking=function(){T(),at=!1},T(),l.reject=R,l.fulfill=I,l.master=S,l.spread=E,y.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},l.async=M,l.spawn=N,l.return=D,l.promised=P,l.dispatch=F,y.prototype.dispatch=function(t,n){var e=this,r=d();return l.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},l.get=function(t,n){return l(t).dispatch("get",[n])},y.prototype.get=function(t){return this.dispatch("get",[t])},l.set=function(t,n,e){return l(t).dispatch("set",[n,e])},y.prototype.set=function(t,n){return this.dispatch("set",[t,n])},l.del=l.delete=function(t,n){return l(t).dispatch("delete",[n])},y.prototype.del=y.prototype.delete=function(t){return this.dispatch("delete",[t])},l.mapply=l.post=function(t,n,e){return l(t).dispatch("post",[n,e])},y.prototype.mapply=y.prototype.post=function(t,n){return this.dispatch("post",[t,n])},l.send=l.mcall=l.invoke=function(t,n){return l(t).dispatch("post",[n,X(arguments,2)])},y.prototype.send=y.prototype.mcall=y.prototype.invoke=function(t){return this.dispatch("post",[t,X(arguments,1)])},l.fapply=function(t,n){return l(t).dispatch("apply",[void 0,n])},y.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},l.try=l.fcall=function(t){return l(t).dispatch("apply",[void 0,X(arguments,1)])},y.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(t){var n=l(t),e=X(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(X(arguments))])}},y.prototype.fbind=function(){var t=this,n=X(arguments);return function(){return t.dispatch("apply",[this,n.concat(X(arguments))])}},l.keys=function(t){return l(t).dispatch("keys",[])},y.prototype.keys=function(){return this.dispatch("keys",[])},l.all=C,y.prototype.all=function(){return C(this)},l.any=q,y.prototype.any=function(){return q(this)},l.allResolved=p(L,"allResolved","allSettled"),y.prototype.allResolved=function(){return L(this)},l.allSettled=U,y.prototype.allSettled=function(){return this.then(function(t){return C(Z(t,function(t){function n(){return t.inspect()}return t=l(t),t.then(n,n)}))})},l.fail=l.catch=function(t,n){return l(t).then(void 0,n)},y.prototype.fail=y.prototype.catch=function(t){return this.then(void 0,t)},l.progress=z,y.prototype.progress=function(t){return this.then(void 0,void 0,t)},l.fin=l.finally=function(t,n){return l(t).finally(n)},y.prototype.fin=y.prototype.finally=function(t){return t=l(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},l.done=function(t,n,e,r){return l(t).done(n,e,r)},y.prototype.done=function(t,e,r){var o=function(t){l.nextTick(function(){if(i(t,u),!l.onerror)throw t;l.onerror(t)})},u=t||e||r?this.then(t,e,r):this;"object"==typeof n&&n&&n.domain&&(o=n.domain.bind(o)),u.then(void 0,o)},l.timeout=function(t,n,e){return l(t).timeout(n,e)},y.prototype.timeout=function(t,n){var e=d(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},l.delay=function(t,n){return void 0===n&&(n=t,t=void 0),l(t).delay(n)},y.prototype.delay=function(t){return this.then(function(n){var e=d();return setTimeout(function(){e.resolve(n)},t),e.promise})},l.nfapply=function(t,n){return l(t).nfapply(n)},y.prototype.nfapply=function(t){var n=d(),e=X(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},l.nfcall=function(t){var n=X(arguments,1);return l(t).nfapply(n)},y.prototype.nfcall=function(){var t=X(arguments),n=d();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},l.nfbind=l.denodeify=function(t){var n=X(arguments,1);return function(){var e=n.concat(X(arguments)),r=d();return e.push(r.makeNodeResolver()),l(t).fapply(e).fail(r.reject),r.promise}},y.prototype.nfbind=y.prototype.denodeify=function(){var t=X(arguments);return t.unshift(this),l.denodeify.apply(void 0,t)},l.nbind=function(t,n){var e=X(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(X(arguments)),i=d();return o.push(i.makeNodeResolver()),l(r).fapply(o).fail(i.reject),i.promise}},y.prototype.nbind=function(){var t=X(arguments,0);return t.unshift(this),l.nbind.apply(void 0,t)},l.nmapply=l.npost=function(t,n,e){return l(t).npost(n,e)},y.prototype.nmapply=y.prototype.npost=function(t,n){var e=X(n||[]),r=d();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(t,n){var e=X(arguments,2),r=d();return e.push(r.makeNodeResolver()),l(t).dispatch("post",[n,e]).fail(r.reject),r.promise},y.prototype.nsend=y.prototype.nmcall=y.prototype.ninvoke=function(t){var n=X(arguments,1),e=d();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},l.nodeify=B,y.prototype.nodeify=function(t){return t?void this.then(function(n){l.nextTick(function(){t(null,n)})},function(n){l.nextTick(function(){t(n)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ft=s();return l})}).call(n,e(2),e(3).setImmediate)},function(t,n){function e(t){return a===setTimeout?setTimeout(t,0):a.call(null,t,0)}function r(t){f===clearTimeout?clearTimeout(t):f.call(null,t)}function o(){d&&p&&(d=!1,p.length?l=p.concat(l):h=-1,l.length&&i())}function i(){if(!d){var t=e(o);d=!0;for(var n=l.length;n;){for(p=l,l=[];++h<n;)p&&p[h].run();h=-1,n=l.length}p=null,d=!1,r(t)}}function u(t,n){this.fun=t,this.array=n}function c(){}var a,f,s=t.exports={};!function(){try{a=setTimeout}catch(t){a=function(){throw new Error("setTimeout is not defined")}}try{f=clearTimeout}catch(t){f=function(){throw new Error("clearTimeout is not defined")}}}();var p,l=[],d=!1,h=-1;s.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];l.push(new u(t,n)),1!==l.length||d||e(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=c,s.addListener=c,s.once=c,s.off=c,s.removeListener=c,s.removeAllListeners=c,s.emit=c,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,n,e){(function(t,r){function o(t,n){this._id=t,this._clearFn=n}var i=e(2).nextTick,u=Function.prototype.apply,c=Array.prototype.slice,a={},f=0;n.setTimeout=function(){return new o(u.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new o(u.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},n.setImmediate="function"==typeof t?t:function(t){var e=f++,r=!(arguments.length<2)&&c.call(arguments,1);return a[e]=!0,i(function(){a[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof r?r:function(t){delete a[t]}}).call(n,e(3).setImmediate,e(3).clearImmediate)},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.config={background_url:"./assets/bg.gif",spritesheet_url:"./assets/spritesheet.png",spritesheet:{a:{at:{x:151,y:301,w:86,h:83},to:{x:97,y:192}},b:{at:{x:133,y:48,w:57,h:53},to:{x:186,y:197}},c:{at:{x:111,y:105,w:55,h:59},to:{x:232,y:193}},d:{at:{x:190,y:166,w:46,h:63},to:{x:347,y:183}},e:{at:{x:82,y:48,w:51,h:52},to:{x:409,y:174}},f:{at:{x:0,y:166,w:72,h:61},to:{x:528,y:194}},g:{at:{x:88,y:384,w:77,h:87},to:{x:602,y:145}},h:{at:{x:70,y:229,w:68,h:67},to:{x:693,y:143}},i:{at:{x:0,y:301,w:74,h:76},to:{x:11,y:309}},j:{at:{x:190,y:48,w:49,h:57},to:{x:128,y:339}},k:{at:{x:0,y:384,w:88,h:84},to:{x:176,y:332}},l:{at:{x:0,y:0,w:37,h:38},to:{x:279,y:352}},m:{at:{x:131,y:166,w:59,h:63},to:{x:352,y:334}},n:{at:{x:138,y:229,w:71,h:72},to:{x:424,y:304}},o:{at:{x:83,y:0,w:43,h:44},to:{x:522,y:294}},p:{at:{x:126,y:0,w:45,h:48},to:{x:608,y:287}},q:{at:{x:74,y:301,w:77,h:79},to:{x:789,y:275}},r:{at:{x:0,y:229,w:70,h:66},to:{x:65,y:463}},s:{at:{x:0,y:48,w:39,h:49},to:{x:153,y:478}},t:{at:{x:39,y:48,w:43,h:49},to:{x:212,y:498}},u:{at:{x:166,y:105,w:43,h:61},to:{x:302,y:485}},v:{at:{x:55,y:105,w:56,h:58},to:{x:380,y:476}},w:{at:{x:171,y:0,w:37,h:48},to:{x:468,y:467}},x:{at:{x:72,y:166,w:59,h:61},to:{x:533,y:458}},y:{at:{x:0,y:105,w:55,h:57},to:{x:634,y:444}},z:{at:{x:37,y:0,w:46,h:42},to:{x:781,y:448}}},mapping:{a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z","!":"abcdefghijklmnopqrstuvwxyz"}}},function(t,n,e){(function(t){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.render=n.load=n.getdata=n.ratio=n.context=n.canvas=void 0;var o=e(1),i=r(o),u=n.canvas=document.querySelector("canvas"),c=n.context=u.getContext("2d"),a=n.ratio=.5,f=void 0,s=void 0;n.getdata=function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],e=arguments.length<=2||void 0===arguments[2]?NaN:arguments[2],r=arguments.length<=3||void 0===arguments[3]?NaN:arguments[3];return isNaN(e)&&(e=u.width),isNaN(r)&&(r=u.height),c.getImageData(t,n,e,r)},n.load=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return i.default.all(n.map(function(t){var n=i.default.defer(),e=new Image;return e.onload=function(){n.resolve(e)},e.src=t,n.promise})).spread(function(t,n){f=t,s=n})},n.render=function(){var n=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],p=i.default.defer();return u.width=f.naturalWidth*a,u.height=f.naturalHeight*a,c.scale(a,a),c.drawImage(f,0,0),n in e&&e[n].split("").filter(function(t){return t in r}).forEach(function(t){t=r[t],c.drawImage(s,t.at.x,t.at.y,t.at.w,t.at.h,t.to.x,t.to.y,t.at.w,t.at.h)}),t(function(){p.resolve(u.toDataURL(o))}),p.promise}}).call(n,e(3).setImmediate)},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=1e3/3,r=null,o=null,i=(n.ontick=function(){var t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];t instanceof Function||(t=function(){}),o=t},n.play=function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];i();var n=t.split("").reduce(function(t,n){return t.concat([n,!1])},[]),u=0,c=n.length;r=setInterval(function(){o instanceof Function&&o(n[u]),++u==c&&(u=0)},e)},n.stop=function(){clearInterval(r)})},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=document.querySelector("input"),r=null,o=(n.oninput=function(){var t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];t instanceof Function||(t=function(){}),r=t},n.getinput=function(){return e.value+" "});e.oninput=function(){r instanceof Function&&r(o())}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.compile=void 0;var o=e(1),i=r(o),u=e(9),c=r(u),a=e(10),f=function(t){var n=i.default.defer(),e=new FileReader;return e.onloadend=function(){n.resolve(e.result)},e.readAsArrayBuffer(t),n.promise},s=function(t){return(0,a.execute)("./scripts/thread.js",{type:"command",arguments:["-framerate",3,"-i","frame%03d.jpg","-r",3,"-strict","experimental","-pix_fmt","yuv420p","-v","verbose","output.mp4"],files:t.map(function(t,n){for(var e=n.toString();e.length<3;)e="0"+e;return{data:new Uint8Array(t),name:"frame"+e+".jpg"}})})};n.compile=function(t,n,e){return(0,i.default)().then(function(){return t.split("").reduce(function(t,n){return t.concat([n,!1])},[])}).then(function(t){var r=new c.default(60);return t.map(function(t){n.render(t,e.mapping,e.spritesheet);var o=r.encode(n.getdata(),60,!0);return new Blob([o.buffer],{type:"image/jpeg"})})}).then(function(t){var n=[];return t.reduce(function(t,e){return f(e).then(function(t){n.push(t)})},(0,i.default)()).then(function(){return n})}).then(function(t){return s(t)})}},function(t,n){"use strict";function e(t){function n(t){for(var n=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],e=0;e<64;e++){var r=T((n[e]*t+50)/100);r<1?r=1:r>255&&(r=255),_[z[e]]=r}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var u=T((o[i]*t+50)/100);u<1?u=1:u>255&&(u=255),A[z[i]]=u}for(var c=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],a=0,f=0;f<8;f++)for(var s=0;s<8;s++)R[a]=1/(_[z[a]]*c[f]*c[s]*8),I[a]=1/(A[z[a]]*c[f]*c[s]*8),a++}function e(t,n){for(var e=0,r=0,o=new Array,i=1;i<=16;i++){for(var u=1;u<=t[i];u++)o[n[r]]=[],o[n[r]][0]=e,o[n[r]][1]=i,r++,e++;e*=2}return o}function r(){g=e(B,Q),x=e(J,V),k=e(H,$),j=e(W,G)}function o(){for(var t=1,n=2,e=1;e<=15;e++){for(var r=t;r<n;r++)S[32767+r]=e,O[32767+r]=[],O[32767+r][1]=e,O[32767+r][0]=r;for(var o=-(n-1);o<=-t;o++)S[32767+o]=e,O[32767+o]=[],O[32767+o][1]=e,O[32767+o][0]=n-1+o;t<<=1,n<<=1}}function i(){for(var t=0;t<256;t++)U[t]=19595*t,U[t+256>>0]=38470*t,U[t+512>>0]=7471*t+32768,U[t+768>>0]=-11059*t,U[t+1024>>0]=-21709*t,U[t+1280>>0]=32768*t+8421375,U[t+1536>>0]=-27439*t,U[t+1792>>0]=-5329*t}function u(t){for(var n=t[0],e=t[1]-1;e>=0;)n&1<<e&&(D|=1<<P),e--,P--,P<0&&(255==D?(c(255),c(0)):c(D),P=7,D=0)}function c(t){N.push(L[t])}function a(t){c(t>>8&255),c(255&t)}function f(t,n){var e,r,o,i,u,c,a,f,s,p=0,l=8,d=64;for(s=0;s<l;++s){e=t[p],r=t[p+1],o=t[p+2],i=t[p+3],u=t[p+4],c=t[p+5],a=t[p+6],f=t[p+7];var h=e+f,v=e-f,y=r+a,m=r-a,w=o+c,g=o-c,x=i+u,k=i-u,j=h+x,b=h-x,T=y+w,_=y-w;t[p]=j+T,t[p+4]=j-T;var A=.707106781*(_+b);t[p+2]=b+A,t[p+6]=b-A,j=k+g,T=g+m,_=m+v;var R=.382683433*(j-_),I=.5411961*j+R,O=1.306562965*_+R,S=.707106781*T,M=v+S,N=v-S;t[p+5]=N+I,t[p+3]=N-I,t[p+1]=M+O,t[p+7]=M-O,p+=8}for(p=0,s=0;s<l;++s){e=t[p],r=t[p+8],o=t[p+16],i=t[p+24],u=t[p+32],c=t[p+40],a=t[p+48],f=t[p+56];var D=e+f,P=e-f,F=r+a,C=r-a,q=o+c,L=o-c,U=i+u,z=i-u,B=D+U,Q=D-U,H=F+q,$=F-q;t[p]=B+H,t[p+32]=B-H;var J=.707106781*($+Q);t[p+16]=Q+J,t[p+48]=Q-J,B=z+L,H=L+C,$=C+P;var V=.382683433*(B-$),W=.5411961*B+V,G=1.306562965*$+V,X=.707106781*H,K=P+X,Y=P-X;t[p+40]=Y+W,t[p+24]=Y-W,t[p+8]=K+G,t[p+56]=K-G,p++}var Z;for(s=0;s<d;++s)Z=t[s]*n[s],E[s]=Z>0?Z+.5|0:Z-.5|0;return E}function s(){a(65504),a(16),c(74),c(70),c(73),c(70),c(0),c(1),c(1),c(0),a(1),a(1),c(0),c(0)}function p(t,n){a(65472),a(17),c(8),a(n),a(t),c(3),c(1),c(17),c(0),c(2),c(17),c(1),c(3),c(17),c(1)}function l(){a(65499),a(132),c(0);for(var t=0;t<64;t++)c(_[t]);c(1);for(var n=0;n<64;n++)c(A[n])}function d(){a(65476),a(418),c(0);for(var t=0;t<16;t++)c(B[t+1]);for(var n=0;n<=11;n++)c(Q[n]);c(16);for(var e=0;e<16;e++)c(H[e+1]);for(var r=0;r<=161;r++)c($[r]);c(1);for(var o=0;o<16;o++)c(J[o+1]);for(var i=0;i<=11;i++)c(V[i]);c(17);for(var u=0;u<16;u++)c(W[u+1]);for(var f=0;f<=161;f++)c(G[f])}function h(){a(65498),a(12),c(3),c(1),c(0),c(2),c(17),c(3),c(17),c(0),c(63),c(0)}function v(t,n,e,r,o){for(var i,c=o[0],a=o[240],s=16,p=63,l=64,d=f(t,n),h=0;h<l;++h)M[z[h]]=d[h];var v=M[0]-e;e=M[0],0==v?u(r[0]):(i=32767+v,u(r[S[i]]),u(O[i]));for(var y=63;y>0&&0==M[y];y--);if(0==y)return u(c),e;for(var m,w=1;w<=y;){for(var g=w;0==M[w]&&w<=y;++w);var x=w-g;if(x>=s){m=x>>4;for(var k=1;k<=m;++k)u(a);x=15&x}i=32767+M[w],u(o[(x<<4)+S[i]]),u(O[i]),w++}return y!=p&&u(c),e}function y(){for(var t=String.fromCharCode,n=0;n<256;n++)L[n]=t(n)}function m(t){if(t<=0&&(t=1),t>100&&(t=100),b!=t){var e=0;e=t<50?Math.floor(5e3/t):Math.floor(200-2*t),n(e),b=t,console.log("Quality set to: "+t+"%")}}function w(){var n=(new Date).getTime();t||(t=50),y(),r(),o(),i(),m(t);var e=(new Date).getTime()-n;console.log("Initialization "+e+"ms")}var g,x,k,j,b,T=(Math.round,Math.floor),_=new Array(64),A=new Array(64),R=new Array(64),I=new Array(64),O=new Array(65535),S=new Array(65535),E=new Array(64),M=new Array(64),N=[],D=0,P=7,F=new Array(64),C=new Array(64),q=new Array(64),L=new Array(256),U=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],J=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(t,n,e){var r=(new Date).getTime();n&&m(n),N=new Array,D=0,P=7,a(65496),s(),l(),p(t.width,t.height),d(),h();var o=0,i=0,c=0;D=0,P=7,this.encode.displayName="_encode_";for(var f,y,w,b,T,_,A,O,S,E=t.data,M=t.width,L=t.height,z=4*M,B=0;B<L;){for(f=0;f<z;){for(T=z*B+f,_=T,A=-1,O=0,S=0;S<64;S++)O=S>>3,A=4*(7&S),_=T+O*z+A,B+O>=L&&(_-=z*(B+1+O-L)),f+A>=z&&(_-=f+A-z+4),y=E[_++],w=E[_++],b=E[_++],F[S]=(U[y]+U[w+256>>0]+U[b+512>>0]>>16)-128,C[S]=(U[y+768>>0]+U[w+1024>>0]+U[b+1280>>0]>>16)-128,q[S]=(U[y+1280>>0]+U[w+1536>>0]+U[b+1792>>0]>>16)-128;o=v(F,R,o,g,k),i=v(C,I,i,x,j),c=v(q,I,c,x,j),f+=32}B+=8}if(P>=0){var Q=[];Q[1]=P+1,Q[0]=(1<<P+1)-1,u(Q)}if(a(65497),e){for(var H=N.length,$=new Uint8Array(H),J=0;J<H;J++)$[J]=N[J].charCodeAt();N=[];var V=(new Date).getTime()-r;return console.log("Encoding time: "+V+"ms"),$}var W="data:image/jpeg;base64,"+btoa(N.join(""));N=[];var V=(new Date).getTime()-r;return console.log("Encoding time: "+V+"ms"),W},w()}t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.execute=void 0;var o=e(1),i=r(o);n.execute=function(t,n){var e=i.default.defer(),r=new Worker(t);return r.onmessage=function(t){switch(t=t.data,t.type){case"ready":return r.postMessage(n);case"stdout":return console.log(t.data);case"done":return e.resolve(new Blob([t.data],{type:"video/mp4"}))}},e.promise}}]);